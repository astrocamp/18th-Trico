{% extends "shared/layout.html" %}
{% load static %}
{% block content %}
<!-- prettier-ignore -->
 <body class="bg-white">
    <div class="flex flex-wrap justify-center gap-2 p-6">
      {% for category in categories %}
      <a href="{% url 'categories:service_by_category' category.id %}" class="block bg-white shadow-md hover:shadow-lg rounded-lg p-4 text-center transition duration-300 border border-gray-300 hover:bg-gray-100">
        <h3 class="w-32 text-sm font-light text-gray-800">{{ category.name }}</h3>
      </a>
      {% endfor %}
    </div>

    <!-- 最近新增 -->
    <div class="main overflow-hidden flex flex-col justify-between bg-white"> 
      <div class="visualBox py-6 px-4 my-5 w-full sm:max-w-[600px] md:max-w-[800px] lg:max-w-[1200px] mx-auto bg-gray-100 rounded-lg">
        <div class="flex flex-col items-center mb-6">
          <h2 class="text-2xl font-bold text-gray-800 text-center">最近新增</h1>
        </div>
        <div class="services grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-8">
          {% for service in services %}
          {% include "pages/service_card.html" %}
          {% empty %}
          <p class="text-center text-gray-500 col-span-full">目前沒有服務資料。</p>
          {% endfor %}
    
          <!-- 顯示填充卡牌 -->
          {% for _ in placeholders %}
          <div class="bg-white p-6 border border-gray-200 transition duration-300">
            <div class="animate-pulse">
              <div class="h-40 bg-gray-300 rounded-lg mb-4"></div>
              <div class="h-4 bg-gray-300 rounded w-3/4 mb-2"></div>
              <div class="h-4 bg-gray-300 rounded w-1/2"></div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- 您可能會感興趣 -->
    <div class="main overflow-hidden flex flex-col justify-between bg-white"> 
      <div class="visualBox py-6 px-4 my-5 w-full sm:max-w-[600px] md:max-w-[800px] lg:max-w-[1200px] mx-auto bg-gray-100 rounded-lg">
        <div class="flex flex-col items-center mb-6">
          <h2 class="text-2xl font-bold text-gray-800 text-center">你可能感興趣</h1>
        </div>
        <div class="services grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-8">
          
          {% for service in services %}
          {% include "pages/service_card.html" %}
          {% empty %}
          <p class="text-center text-gray-500 col-span-full">目前沒有服務資料。</p>
          {% endfor %}
    
          <!-- 顯示填充卡牌 -->
          {% for _ in placeholders %}
          <div class="bg-white shadow-md rounded-lg p-6 border border-gray-200 hover:shadow-xl transition duration-300">
            <div class="animate-pulse">
              <div class="h-40 bg-gray-300 rounded-lg mb-4"></div>
              <div class="h-4 bg-gray-300 rounded w-3/4 mb-2"></div>
              <div class="h-4 bg-gray-300 rounded w-1/2"></div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- 評分最高 -->
    <div class="main overflow-hidden flex flex-col justify-between bg-white"> 
      <div class="visualBox py-6 px-4 my-5 w-full sm:max-w-[600px] md:max-w-[800px] lg:max-w-[1200px] mx-auto bg-gray-100 rounded-lg">
        <div class="flex flex-col items-center mb-6">
          <h2 class="text-2xl font-bold text-gray-800 text-center">評分最高</h1>
        </div>
        <div class="services grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-8">
          {% for service in services %}
          {% include "pages/service_card.html" %}
          {% empty %}
          <p class="text-center text-gray-500 col-span-full">目前沒有服務資料。</p>
          {% endfor %}
    
          <!-- 顯示填充卡牌 -->
          {% for _ in placeholders %}
          <div class="bg-white shadow-md rounded-lg p-6 border border-gray-200 hover:shadow-xl transition duration-300">
            <div class="animate-pulse">
              <div class="h-40 bg-gray-300 rounded-lg mb-4"></div>
              <div class="h-4 bg-gray-300 rounded w-3/4 mb-2"></div>
              <div class="h-4 bg-gray-300 rounded w-1/2"></div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- 輪播組件 -->
    <div class="flex justify-center py-3">
      <div x-data="carousel()" class="banner">
        <!-- Slides -->
        <div
          class="slides"
          :style="`transform: translateX(-${currentSlide * 1200}px)`"
        >
          <div class="slide">
            <img src="{% static 'images/banner-1.jpg' %}" alt="Slide 1" />
          </div>
          <div class="slide">
            <img src="{% static 'images/banner-2.jpg' %}" alt="Slide 2" />
          </div>
          <div class="slide">
            <img src="{% static 'images/banner-3.jpg' %}" alt="Slide 3" />
          </div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <button class="control-btn" @click="prev">Prev</button>
          <button class="control-btn" @click="next">Next</button>
        </div>
      </div>
    </div>
    <!-- 輪播alpinejs組件 -->
    <script>
      function carousel() {
        return {
          currentSlide: 0,
          totalSlides: 3,

          next() {
            this.currentSlide = (this.currentSlide + 1) % this.totalSlides;
          },

          prev() {
            this.currentSlide =
              (this.currentSlide - 1 + this.totalSlides) % this.totalSlides;
          },

          startAutoSlide() {
            setInterval(() => {
              this.next();
            }, 2000);
          },

          init() {
            this.startAutoSlide();
          },
        };
      }
    </script>

    <!-- 接案者廣告區 -->
    <!-- prettier-ignore -->
    <div class="py-6 px-4 my-5 w-full sm:max-w-[600px] md:max-w-[800px] lg:max-w-[1200px] mx-auto bg-gray-100 rounded-lg">
    <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 justify-center py-3 gap-12">
      <div class="border-solid border border-gray-300 rounded-2xl p-4">
        <div class="flex gap-10">
          <div class="item">
            <div class="flex item-bottom">
              <img class="w-1/4 p-2 rounded-lg" src="{% static 'images/logo-1.jpg' %}" alt="" />
              <p class="text-xl text-gray-800 font-bold pl-1">企業級網站架設</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 justify-center py-4 sm:gap-6">
              <img class="rounded-lg" src="{% static 'images/work1.jpg' %}" alt=""/>
              <ul class="">
                <li class="list-none hover:list-disc hover:text-gray-800">l really like coding...that ererything cannot replace it</li>
                <li class="list-none hover:list-disc hover:text-gray-800">l really like coding...that ererything cannot replace it</li>
                <li class="list-none hover:list-disc hover:text-gray-800">l really like coding...that ererything cannot replace it</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

  </body>

  <!-- 分頁按鈕 -->
  <div class="pagination justify-center pb-2">
    {% if page_obj.has_previous %}
    <a class="new" href="?page={{ page_obj.previous_page_number }}">←</a>
    {% endif %}

    {% for num in page_obj.paginator.page_range %}
    <a class="new page {% if num == page_obj.number %}active{% endif %}" href="?page={{ num }}">
      {{ num }}
    </a>
    {% endfor %}

    {% if page_obj.has_next %}
    <a class="new" href="?page={{ page_obj.next_page_number }}">→</a>
    {% endif %}
  </div>
{% endblock %}
