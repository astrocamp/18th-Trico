<div class="block relative">
    <!-- 愛心按鈕 -->
    <button
        id="toggle-like-btn-{{ service.id }}"
        class="absolute top-2 right-2 w-8 h-8 bg-white rounded-full shadow-md flex items-center justify-center hover:bg-gray-200 z-10"
        data-service-id="{{ service.id }}"
    >
        {% if service.is_liked %}
        <img
            id="like-icon-{{ service.id }}"
            src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' fill='%231C274C' viewBox='0 0 24 24'><path d='M2 9.1371C2 14 6.01943 16.5914 8.96173 18.9109C10 19.7294 11 20.5 12 20.5C13 20.5 14 19.7294 15.0383 18.9109C17.9806 16.5914 22 14 22 9.1371C22 4.27416 16.4998 0.825464 12 5.50063C7.50016 0.825464 2 4.27416 2 9.1371Z'/></svg>"
            alt="Liked"
            class="w-6 h-6"
        />
        {% else %}
        <img
            id="like-icon-{{ service.id }}"
            src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='%231C274C' stroke-width='2' viewBox='0 0 24 24'><path d='M12 20.5C11 20.5 10 19.7294 8.96173 18.9109C6.01943 16.5914 2 14 2 9.1371C2 4.27416 7.50016 0.825464 12 5.50063C16.4998 0.825464 22 4.27416 22 9.1371C22 14 17.9806 16.5914 15.0383 18.9109C14 19.7294 13 20.5 12 20.5Z'/></svg>"
            alt="Not Liked"
            class="w-6 h-6"
        />
        {% endif %}
    </button>

    <!-- 服務卡片連結 -->
    <a href="{% url 'services:service_detail' service.freelancer_user.id service.id %}" class="block">
        <div class="item overflow-hidden transition-transform duration-300 hover:scale-105 border rounded-lg shadow-lg">
            <!-- 服務圖片 -->
            <img class="w-full h-48 object-cover rounded-t-lg" 
                 src="{% if service.photo %}{{ service.photo.url }}{% else %}https://fakeimg.pl/300{% endif %}" 
                 alt="Service Photo"/>
            
            <div class="p-4">
                <!-- 大頭照和姓名 -->
                <div class="flex items-center mb-3">
                    <img class="w-8 h-8 rounded-full border border-gray-300 shadow-sm" 
                         src="{% if service.freelancer_user.profile.photo %}{{ service.freelancer_user.profile.photo.url }}{% else %}https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.webp{% endif %}" 
                         alt="User Avatar"/>
                    <p class="ml-3 text-sm font-semibold text-gray-700 truncate">{{ service.freelancer_user.username }}</p>
                </div>

                <!-- 服務標題 -->
                <p class="text-gray-800 font-medium truncate" title="{{ service.title }}">
                    {{ service.title }}
                </p>

                <!-- 星星評分 -->
                <div class="flex items-center mt-2">
                    {% if service.average_rating %}
                        <p class="text-sm text-gray-500">⭐ {{ service.average_rating|floatformat:1 }}</p>
                    {% else %}
                        <p class="text-sm text-gray-500">⭐ 0.0 (尚無評分)</p>
                    {% endif %}
                </div>

                <!-- 價格 -->
                <p class="mt-2 text-sm font-semibold text-gray-800">
                    費用 ${{service.standard_price}} 起
                </p>
            </div>
        </div>
    </a>
</div>